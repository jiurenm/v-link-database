# ğŸ—„ï¸ V-Link Database

## ğŸ”„ æ•°æ®æµæ°´çº¿ (Pipeline)

1. **Extract (æå–)**: æ¯å¤©å®šæ—¶è¯·æ±‚åˆé›†æ¥å£ã€‚
2. **Transform (è½¬åŒ–)**:
* **æ­£åˆ™æ¸…æ´—**: è‡ªåŠ¨å‰”é™¤æ ‡é¢˜ä¸­çš„â€œã€PJSKã€‘â€ã€â€œä¸­æ–‡å­—å¹•â€ã€â€œPVâ€ç­‰å¹²æ‰°è¯ã€‚
* **ç‰ˆæœ¬èšåˆ**: æ ¹æ®æ­Œåç›¸ä¼¼åº¦ï¼Œå°†åŒä¸€é¦–æ­Œæ›²çš„ 2D MVã€3D MVã€Audio èšåˆè‡³åŒä¸€ä¸ª ID ä¸‹ã€‚
* **æ ‡ç­¾æ³¨å…¥**: è‡ªåŠ¨è¯†åˆ«å¹¶æ ‡æ³¨ PJSK å›¢ä½“ï¼ˆå¦‚ 25-ji, Leo/needï¼‰åŠæ¸¸æˆéš¾åº¦ã€‚


3. **Load (åŠ è½½)**: å°†ç”Ÿæˆçš„ `database.json` è‡ªåŠ¨ commit å¹¶æ¨é€åˆ°æœ¬ä»“åº“çš„ `public` ç›®å½•ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```text
.
â”œâ”€â”€ .github/workflows/    # GitHub Actions å®šæ—¶ä»»åŠ¡é…ç½®
â”œâ”€â”€ scripts/              # æ•°æ®å¼•æ“æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ sync_engine.py    # Python æçº¯è„šæœ¬
â”‚   â””â”€â”€ utils/            # åŒ¹é…å­—å…¸ä¸æ¸…æ´—å·¥å…·
â”œâ”€â”€ public/               # é™æ€èµ„æºå‘å¸ƒç›®å½•
â”‚   â””â”€â”€ database.json     # å‰ç«¯æ¶ˆè´¹çš„æœ€ç»ˆæ•°æ®æ–‡ä»¶ (The "Single Source of Truth")
â”œâ”€â”€ mappings/             # æ‰‹åŠ¨ä¿®æ­£è¡¨ (ç”¨äºå¤„ç†è„šæœ¬æ— æ³•è¯†åˆ«çš„ç‰¹æ®Šæ›²ç›®)
â””â”€â”€ README.md

```

## ğŸ“Š æ•°æ® Schema è§„èŒƒ

å‰ç«¯é€šè¿‡è¯»å– `public/database.json` è·å–æ•°æ®ï¼Œç»“æ„å®šä¹‰å¦‚ä¸‹ï¼š

```typescript
interface Song {
  id: string;             // å†…éƒ¨å”¯ä¸€æ ‡è¯† (åŸºäºåŸaid)
  title: string;          // çº¯å‡€æ­Œå
  artist: string;         // Pä¸» / åˆ¶ä½œäºº
  is_pjsk: boolean;       // æ˜¯å¦å±äº Project Sekai
  pjsk_meta: {            // PJSK ä¸“å±å…ƒæ•°æ® (éPJSKæ›²ç›®ä¸ºnull)
    group: string;        // å¯¹åº”å›¢ä½“ (25-ji, ln, vbs, etc.)
    difficulty: number;   // æ¨è/Masteréš¾åº¦
  } | null;
  versions: [             // å¤šç‰ˆæœ¬å…³è”
    {
      type: "2D" | "3D",
      bvid: string;       // Bç«™è§†é¢‘å”¯ä¸€æ ‡è¯†
      cid: number;        // ç”¨äºåŠ é€Ÿæ’­æ”¾åœ°å€è§£æ
      duration: number;   // æ—¶é•¿ (ç§’)
    }
  ];
}

```

### å¦‚ä½•ä¿®æ­£æ•°æ®

å¦‚æœå‘ç°æŸé¦–æ­Œæ›²çš„æ ‡é¢˜æå–é”™è¯¯æˆ–ç‰ˆæœ¬æœªæ­£ç¡®å…³è”ï¼Œè¯·ä¿®æ”¹ `mappings/corrections.json`ï¼Œè„šæœ¬åœ¨ä¸‹æ¬¡è¿è¡Œæ—¶ä¼šä¼˜å…ˆå‚è€ƒæ­¤è¡¨ã€‚
